generator client {
    provider = "prisma-client-js"
    output   = "../generated/prisma"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

enum Role {
    user
    admin
}

model User {
    id         String  @id @default(uuid())
    telegramId String  @unique @map("telegram_id")
    username   String?
    role       Role    @default(user) @map("role")

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    @@map("users")
}

model AdminUser {
    id         String  @id @default(uuid())
    telegramId String  @unique @map("telegram_id")
    username   String?
    addedBy    String? @map("added_by") // ID админа, который добавил этого админа

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    @@map("admin_users")
}

model Club {
    id   String @id @default(uuid())
    name String
    logo String

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    players Players[]

    @@map("clubs")
}

model Players {
    id     String @id @default(uuid())
    name   String
    avatar String

    clubId String @map("club_id")
    club   Club   @relation(fields: [clubId], references: [id])

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    @@map("players")
}
